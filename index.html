<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MANDEVAL – Vaccine Mandate Decision Aid (Australia, France, Italy)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="styles.css">

  <!-- Optional libraries if you later add charts or exports -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body>
<header class="app-header">
  <div class="app-header-main">
    <div class="logo-mark">
      <span class="logo-icon">M</span>
      <div class="logo-text">
        <span class="logo-title">MANDEVAL</span>
        <span class="logo-subtitle">Vaccine mandate evaluation tool</span>
      </div>
    </div>

    <div class="header-meta">
      <span class="badge badge-primary">Policy decision aid</span>
      <span class="badge badge-outline">Prototype</span>
      <a href="technical-appendix.html"
         target="_blank"
         class="btn-link-small">
        Technical appendix
      </a>
    </div>
  </div>
</header>

<main class="app-shell">
  <!-- TAB BAR -->
  <nav class="tab-bar">
    <button class="tab-link tablink active" data-tab="introTab" type="button">Introduction</button>
    <button class="tab-link tablink" data-tab="configTab" type="button">Configuration</button>
    <button class="tab-link tablink" data-tab="costsTab" type="button">Costs</button>
    <button class="tab-link tablink" data-tab="benefitsTab" type="button">Benefits and support</button>
    <button class="tab-link tablink" data-tab="resultsTab" type="button">Results</button>
    <button class="tab-link tablink" data-tab="scenariosTab" type="button">Saved scenarios</button>
    <button class="tab-link tablink" data-tab="copilotTab" type="button">AI briefings</button>
  </nav>

  <!-- INTRO TAB -->
  <section id="introTab" class="tab-panel active">
    <div class="panel-grid">
      <section class="card">
        <h2>What this tool does</h2>
        <p>
          MANDEVAL helps governments and policy makers explore the trade-offs between
          alternative COVID-19 vaccine mandate designs in Australia, France and Italy.
        </p>
        <p>
          It combines:
        </p>
        <ul>
          <li>Preference evidence from the MandEval discrete choice experiment</li>
          <li>Lives-saved estimates per 100,000 people</li>
          <li>Cost inputs for administration, communication and enforcement</li>
          <li>Model-based estimates of expected public support</li>
        </ul>
        <p class="note">
          The tool does not prescribe a single “correct” policy. It organises evidence
          so that risks, benefits, costs and social acceptability can be weighed transparently.
        </p>
      </section>

      <section class="card">
        <h2>How to use MANDEVAL</h2>
        <ol class="compact-list">
          <li>Select <strong>country</strong>, <strong>outbreak scenario</strong> and mandate design in the <strong>Configuration</strong> tab.</li>
          <li>Enter or review <strong>costs</strong> in the <strong>Costs</strong> tab.</li>
          <li>Enter <strong>expected lives saved per 100,000</strong> and a <strong>value per life saved</strong> in the <strong>Benefits and support</strong> tab.</li>
          <li>The tool then:
            <ul>
              <li>Converts lives saved per 100,000 to total lives saved for the exposed population</li>
              <li>Calculates a monetary benefit and benefit–cost ratio (BCR)</li>
              <li>Uses the MandEval preference models to estimate <strong>expected public support (%)</strong></li>
            </ul>
          </li>
          <li>Save scenarios and compare them in the <strong>Results</strong> and <strong>Saved scenarios</strong> tabs.</li>
        </ol>
      </section>

      <section class="card">
        <h2>Evidence base</h2>
        <p>
          Mandate preferences are based on the MandEval DCE conducted in Australia, France and Italy,
          with estimates from mixed logit and latent class models. The tool uses the mean coefficients
          from the mixed logit models by country and outbreak frame to generate model-based support
          for a given configuration.
        </p>
        <p>
          Cost categories follow a structured taxonomy covering government administration, communication,
          enforcement, compensation and testing pathways, informed by international experience.
        </p>
        <p class="hint">
          For full model tables, cost categories and references, see the
          <a href="technical-appendix.html" target="_blank">technical appendix</a>.
        </p>
      </section>
    </div>
  </section>

  <!-- CONFIGURATION TAB -->
  <section id="configTab" class="tab-panel">
    <div class="panel-grid panel-grid-2">
      <section class="card">
        <h2>Configuration</h2>

        <div class="form-grid">
          <div class="form-group">
            <label for="cfg-country">Country</label>
            <select id="cfg-country">
              <option value="AU">Australia</option>
              <option value="FR">France</option>
              <option value="IT">Italy</option>
            </select>
          </div>

          <div class="form-group">
            <label for="cfg-outbreak">Outbreak scenario</label>
            <select id="cfg-outbreak">
              <option value="mild">Mild outbreak</option>
              <option value="severe">Severe outbreak</option>
            </select>
            <p class="hint">
              Outbreak framing is aligned with the MandEval experiment (mild vs severe).
            </p>
          </div>

          <div class="form-group">
            <label for="cfg-scope">Scope of mandate</label>
            <select id="cfg-scope">
              <option value="highrisk">High-risk occupations and settings only</option>
              <option value="all">All occupations and specified public spaces</option>
            </select>
            <p class="hint">
              “All occupations and public spaces” corresponds to the broad scope attribute
              in the MandEval DCE.
            </p>
          </div>

          <div class="form-group">
            <label for="cfg-exemptions">Exemptions</label>
            <select id="cfg-exemptions">
              <option value="medical">Medical only</option>
              <option value="medrel">Medical + religious</option>
              <option value="medrelpers">Medical + religious + personal</option>
            </select>
            <p class="hint">
              Broader exemptions increase individual choice but can reduce effective coverage.
            </p>
          </div>

          <div class="form-group">
            <label for="cfg-coverage">Minimum coverage threshold</label>
            <select id="cfg-coverage">
              <option value="50">50% of target population</option>
              <option value="70">70% of target population</option>
              <option value="90">90% of target population</option>
            </select>
            <p class="hint">
              Threshold at which mandates could be lifted or considered successful.
            </p>
          </div>

          <div class="form-group">
            <label for="cfg-pop">Population exposed to the mandate (millions)</label>
            <input id="cfg-pop" type="number" min="0" step="0.1" value="5">
            <p class="hint">
              Number of people who would be directly affected by the mandate, in millions.
            </p>
          </div>

          <div class="form-group">
            <label for="cfg-label">Short label for this configuration</label>
            <input id="cfg-label" type="text" placeholder="e.g., AU mild, high-risk only, medical only">
          </div>
        </div>

        <div class="button-row">
          <button id="btn-apply-config" class="btn btn-primary" type="button">
            Apply configuration
          </button>
          <button id="btn-view-summary" class="btn btn-outline" type="button">
            View results summary
          </button>
        </div>
      </section>

      <section class="card">
        <h2>Current configuration at a glance</h2>

        <div id="config-summary-empty" class="empty-state">
          <p>No configuration applied yet.</p>
          <p class="hint">
            Configure country, outbreak scenario and design, then click
            <strong>Apply configuration</strong> to see a summary.
          </p>
        </div>

        <div id="config-summary" class="summary-grid hidden">
          <div class="summary-row">
            <span class="summary-label">Country</span>
            <span class="summary-value" id="summary-country"></span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Outbreak scenario</span>
            <span class="summary-value" id="summary-outbreak"></span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Scope</span>
            <span class="summary-value" id="summary-scope"></span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Exemptions</span>
            <span class="summary-value" id="summary-exemptions"></span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Coverage threshold</span>
            <span class="summary-value" id="summary-coverage"></span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Population exposed</span>
            <span class="summary-value" id="summary-pop"></span>
          </div>
        </div>
      </section>

      <section class="card card-wide">
        <h2>Headline recommendation</h2>
        <p class="hint">
          Apply a configuration to see a concise recommendation that combines endorsement,
          perceived value, indicative costs, benefits and expected public support.
        </p>
        <div id="headline-recommendation" class="headline-recommendation">
          <p class="placeholder">
            No assessment yet. Apply a configuration and benefits to generate a summary.
          </p>
        </div>
        <h3>Briefing text (copy into emails or reports)</h3>
        <p class="hint">
          Once a configuration and benefits are applied, this box provides a short narrative
          summary that can be pasted into briefing notes or meeting minutes.
        </p>
        <textarea id="briefing-text" rows="6" class="briefing-text" readonly></textarea>
      </section>
    </div>
  </section>

  <!-- COSTS TAB -->
  <section id="costsTab" class="tab-panel">
    <div class="panel-grid panel-grid-2">
      <section class="card">
        <h2>Costs</h2>
        <p>
          Enter the direct programme costs over the time horizon you are analysing.
          These can be annual or multi-year totals, as long as you treat costs and benefits
          over the same period.
        </p>

        <div class="form-grid">
          <div class="form-group">
            <label for="cost-admin">Government administration and IT (total)</label>
            <input id="cost-admin" type="number" min="0" step="100000" value="0">
            <p class="hint">
              Central IT systems, digital passes, call centres and general administration.
            </p>
          </div>

          <div class="form-group">
            <label for="cost-comm">Communication and outreach (total)</label>
            <input id="cost-comm" type="number" min="0" step="50000" value="0">
            <p class="hint">
              Mass media campaigns, stakeholder engagement and public information.
            </p>
          </div>

          <div class="form-group">
            <label for="cost-enforce">Enforcement and compliance operations (total)</label>
            <input id="cost-enforce" type="number" min="0" step="50000" value="0">
            <p class="hint">
              Inspections, compliance checks and support from police or labour inspectors.
            </p>
          </div>

          <div class="form-group">
            <label for="cost-comp">Compensation and support (total)</label>
            <input id="cost-comp" type="number" min="0" step="50000" value="0">
            <p class="hint">
              Temporary income support, hardship funds or compensation schemes linked to mandates.
            </p>
          </div>

          <div class="form-group form-group-wide">
            <label for="cost-notes">Notes on costing assumptions</label>
            <textarea id="cost-notes" rows="3"
                      placeholder="Document main assumptions, data sources and any exclusions."></textarea>
          </div>
        </div>

        <div class="button-row">
          <button id="btn-apply-costs" class="btn btn-primary" type="button">
            Apply costs
          </button>
        </div>
      </section>

      <section class="card">
        <h2>Cost summary</h2>
        <div id="costs-summary-empty" class="empty-state">
          <p>No costing information applied yet.</p>
        </div>
        <div id="costs-summary" class="summary-grid hidden">
          <div class="summary-row">
            <span class="summary-label">Administration and IT</span>
            <span class="summary-value" id="costs-admin"></span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Communication and outreach</span>
            <span class="summary-value" id="costs-comm"></span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Enforcement and compliance</span>
            <span class="summary-value" id="costs-enforce"></span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Compensation and support</span>
            <span class="summary-value" id="costs-comp"></span>
          </div>
          <div class="summary-row summary-row-strong">
            <span class="summary-label">Total cost</span>
            <span class="summary-value" id="costs-total"></span>
          </div>
        </div>
      </section>
    </div>
  </section>

  <!-- BENEFITS TAB -->
  <section id="benefitsTab" class="tab-panel">
    <div class="panel-grid panel-grid-2">
      <section class="card">
        <h2>Epidemiological benefits</h2>
        <p>
          Enter the expected lives saved per 100,000 people under this mandate compared to
          the relevant counterfactual (e.g., voluntary vaccination with the same outbreak).
        </p>

        <div class="form-grid">
          <div class="form-group">
            <label for="benefit-lives">Expected lives saved per 100,000</label>
            <input id="benefit-lives" type="number" min="0" step="1" value="10">
            <p class="hint">
              This is the MandEval DCE attribute “Expected lives saved (per 100,000)”.
            </p>
          </div>

          <div class="form-group">
            <label for="benefit-value-per-life">Value per life saved (currency units)</label>
            <input id="benefit-value-per-life" type="number" min="0" step="10000" value="5000000">
            <p class="hint">
              Can be based on the value of a statistical life (VSL) or other agreed metric.
            </p>
          </div>

          <div class="form-group">
            <label for="benefit-support">Model-based public support (0–100)</label>
            <input id="benefit-support" type="number" min="0" max="100" step="1" value="0" readonly>
            <p class="hint">
              Automatically calculated from the MandEval preference models for the current
              configuration and lives-saved level.
            </p>
          </div>

          <div class="form-group form-group-wide">
            <label for="benefit-notes">Notes on benefits and modelling assumptions</label>
            <textarea id="benefit-notes" rows="3"
                      placeholder="Record how lives-saved estimates were derived and any key assumptions."></textarea>
          </div>
        </div>

        <div class="button-row">
          <button id="btn-apply-benefits" class="btn btn-primary" type="button">
            Apply benefits and support
          </button>
        </div>
      </section>

      <section class="card">
        <h2>Benefits summary</h2>
        <div id="benefits-summary-empty" class="empty-state">
          <p>No benefits applied yet.</p>
        </div>
        <div id="benefits-summary" class="summary-grid hidden">
          <div class="summary-row">
            <span class="summary-label">Lives saved per 100,000</span>
            <span class="summary-value" id="benefits-lives-per-100k"></span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Total lives saved</span>
            <span class="summary-value" id="benefits-lives-total"></span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Monetary benefit</span>
            <span class="summary-value" id="benefits-monetary"></span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Model-based public support</span>
            <span class="summary-value" id="benefits-support"></span>
          </div>
        </div>
      </section>
    </div>
  </section>

  <!-- RESULTS TAB -->
  <section id="resultsTab" class="tab-panel">
    <section class="card card-wide">
      <h2>Top policy options</h2>
      <p>
        Once you save scenarios, this table ranks them by benefit–cost ratio and shows
        the model-based public support and a simple feasibility flag.
      </p>

      <div class="table-wrapper">
        <table class="data-table">
          <thead>
          <tr>
            <th>Rank</th>
            <th>Scenario label</th>
            <th>Country</th>
            <th>Outbreak</th>
            <th>Scope</th>
            <th>Exemptions</th>
            <th>Coverage</th>
            <th>Total cost</th>
            <th>Monetary benefit</th>
            <th>BCR</th>
            <th>Public support</th>
            <th>Feasibility flag</th>
          </tr>
          </thead>
          <tbody id="results-table-body">
          <tr id="results-empty-row">
            <td colspan="12" class="empty-row">
              No scenarios saved yet. Configure a mandate, apply costs and benefits,
              then click “Save scenario”.
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </section>
  </section>

  <!-- SAVED SCENARIOS TAB -->
  <section id="scenariosTab" class="tab-panel">
    <section class="card card-wide">
      <h2>Saved scenarios</h2>
      <p>
        Use this table to review and export the scenarios you have saved. “Top policy options”
        in the Results tab summarises and ranks them.
      </p>

      <div class="button-row">
        <button id="btn-export-csv" class="btn btn-outline" type="button">
          Export scenarios (CSV)
        </button>
        <button id="btn-export-pdf" class="btn btn-outline" type="button">
          Export summary (PDF)
        </button>
      </div>

      <div class="table-wrapper">
        <table class="data-table">
          <thead>
          <tr>
            <th>Label</th>
            <th>Country</th>
            <th>Outbreak</th>
            <th>Scope</th>
            <th>Exemptions</th>
            <th>Coverage</th>
            <th>Cost</th>
            <th>Benefit</th>
            <th>BCR</th>
            <th>Support</th>
          </tr>
          </thead>
          <tbody id="scenarios-table-body">
          <tr id="scenarios-empty-row">
            <td colspan="10" class="empty-row">
              No scenarios saved yet.
            </td>
          </tr>
          </tbody>
        </table>
      </div>

      <div class="button-row">
        <button id="btn-save-scenario" class="btn btn-primary" type="button">
          Save scenario
        </button>
        <button id="btn-clear-scenarios" class="btn btn-danger" type="button">
          Clear all scenarios
        </button>
      </div>
    </section>
  </section>

  <!-- COPILOT / CHATGPT BRIEFINGS TAB -->
  <section id="copilotTab" class="tab-panel">
    <section class="card card-wide">
      <h2>AI briefings (Copilot / ChatGPT)</h2>
      <p>
        Generate a briefing prompt based on the current configuration, costs and benefits.
        You can paste this into Microsoft Copilot or ChatGPT to draft short policy briefs.
      </p>

      <div class="button-row">
        <button id="btn-generate-copilot" class="btn btn-primary" type="button">
          Generate Copilot prompt
        </button>
        <button id="btn-generate-chatgpt" class="btn btn-outline" type="button">
          Generate ChatGPT prompt
        </button>
      </div>

      <label for="ai-briefing-text">Prompt text</label>
      <textarea id="ai-briefing-text" rows="10"
                placeholder="Apply a configuration, costs and benefits, then generate a prompt."></textarea>

      <div class="button-row">
        <button id="btn-copy-briefing" class="btn btn-primary" type="button">
          Copy prompt to clipboard
        </button>
      </div>

      <p class="hint">
        The prompts summarise the configuration and numerical results but do not send
        any data automatically. You remain responsible for checking the outputs.
      </p>
    </section>
  </section>
</main>

<div id="toast-container" class="toast-container"></div>

<script src="script.js"></script>
</body>
</html>
